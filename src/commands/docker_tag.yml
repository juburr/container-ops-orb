description: |
  Tag a local Docker image with multiple tags for a target registry.
  This command applies one or more tags to an existing local image,
  preparing it for pushing to a container registry.

parameters:
  source_image:
    type: string
    description: |
      (Required) The source image reference including tag.
      Example: "myapp:abc123" or "myapp:latest"

  target_image:
    type: string
    description: |
      (Required) The target image reference without tag. This should include
      the registry and namespace. Example: "ghcr.io/myorg/myapp"

  tags:
    type: string
    description: |
      (Required) Space-separated list of tags to apply to the target image.
      Supports environment variable substitution.
      Example: "latest v1.0.0 ${CIRCLE_SHA1}"

steps:
  - run:
      name: Docker Tag
      environment:
        PARAM_SOURCE_IMAGE: << parameters.source_image >>
        PARAM_TARGET_IMAGE: << parameters.target_image >>
        PARAM_TAGS: << parameters.tags >>
      command: << include(scripts/docker/tag.sh) >>
